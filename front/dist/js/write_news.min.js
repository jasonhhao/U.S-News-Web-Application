function News(){}News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){console.log(t.data);var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$("input[name='title']").val(),a=$("select[name='category']").val(),i=$("input[name='desc']").val(),s=$("input[name='thumbnail']").val(),l=$("textarea[name='content']").val();if(e)var o="/cms/edit_news/";else o="/cms/write_news/";xfzajax.post({url:o,data:{title:n,category:a,desc:i,thumbnail:s,content:l,pk:e},success:function(t){200===t.code&&xfzalert.alertSuccess("Successfully released news!",function(){window.location.reload()})}})})},News.prototype.run=function(){this.listenUploadFileEvent(),this.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwidmFsIiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJwayIsInRoaXMiLCJhdHRyIiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsUUFFVEEsS0FBS0MsVUFBVUMsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxPQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQU9KLEdBQ3ZCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEJDLFFBQVFDLElBQUlGLEVBQWEsTUFDekIsSUFBSUwsRUFBTUssRUFBYSxLQUFPLElBQ1RkLEVBQUUsbUJBQ1JpQixJQUFJUixVQVF2Q2IsS0FBS0MsVUFBVXFCLGtCQUFvQixXQUNqQmxCLEVBQUUsZUFDUm1CLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE10QixFQUFFdUIsTUFDQ0MsS0FBSyxnQkFFZEMsRUFBUXpCLEVBQUUsdUJBQXVCaUIsTUFDakNTLEVBQVcxQixFQUFFLDJCQUEyQmlCLE1BQ3hDVSxFQUFPM0IsRUFBRSxzQkFBc0JpQixNQUMvQlcsRUFBWTVCLEVBQUUsMkJBQTJCaUIsTUFDekNZLEVBQVU3QixFQUFFLDRCQUE0QmlCLE1BRzVDLEdBQUdLLEVBQ0MsSUFBSWIsRUFBTSx1QkFFTkEsRUFBTSxtQkFHZEYsUUFBUUMsS0FBSyxDQUNUQyxJQUFPQSxFQUNQQyxLQUFRLENBQ0plLE1BQVNBLEVBQ1RDLFNBQVlBLEVBQ1pDLEtBQVFBLEVBQ1JDLFVBQWFBLEVBQ2JDLFFBQVdBLEVBQ1hQLEdBQU1BLEdBRVZULFFBQVcsU0FBVUMsR0FDSyxNQUFuQkEsRUFBYSxNQUNaZ0IsU0FBU0MsYUFBYSw4QkFBK0IsV0FDakRDLE9BQU9DLFNBQVNDLGlCQVd0Q3RDLEtBQUtDLFVBQVVzQyxJQUFNLFdBQ05aLEtBQ056Qix3QkFETXlCLEtBRU5MLHFCQUdUbEIsRUFBRSxZQUNhLElBQUlKLE1BQ1Z1QyIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3MoKXt9XG5cbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpbGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLGZpbGUpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRbJ2RhdGEnXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5cbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgdmFyIHN1Ym1pdEJ0biA9ICQoJyNzdWJtaXQtYnRuJyk7XG4gIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgYnRuID0gJCh0aGlzKTtcbiAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcblxuICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XG4gICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XG4gICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XG4gICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xuICAgICAgdmFyIGNvbnRlbnQgPSAkKFwidGV4dGFyZWFbbmFtZT0nY29udGVudCddXCIpLnZhbCgpO1xuICAgICAgLy9jb25zb2xlLmxvZyh0aXRsZSxjYXRlZ29yeSxjb250ZW50LGRlc2MsdGh1bWJuYWlsKTtcblxuICAgICAgaWYocGspe1xuICAgICAgICAgIHZhciB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJ1xuICAgICAgfWVsc2V7XG4gICAgICAgICAgdmFyIHVybCA9ICcvY21zL3dyaXRlX25ld3MvJ1xuICAgICAgfVxuXG4gICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICd1cmwnOiB1cmwsXG4gICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxuICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxuICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxuICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICdwayc6IHBrXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ1N1Y2Nlc3NmdWxseSByZWxlYXNlZCBuZXdzIScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICB9KTtcbn07XG5cblxuXG5cbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5VcGxvYWRGaWxlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN1Ym1pdEV2ZW50KCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XG4gICAgbmV3cy5ydW4oKTtcbn0pOyJdfQ==
