function Banner(){this.index=1,this.banner_width=798,this.banner_group=$("#banner-group"),this.left_arrow=$(".left-arrow"),this.right_arrow=$(".right-arrow"),this.banner_ul=$("#banner-ul"),this.li_list=this.banner_ul.children("li"),this.banner_count=this.li_list.length,this.page_control=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.li_list.eq(0).clone(),e=n.li_list.eq(n.banner_count-1).clone();n.banner_ul.append(t),n.banner_ul.prepend(e),this.banner_ul.css({width:n.banner_width*(n.banner_count+2),left:-n.banner_width})},Banner.prototype.init_page_control=function(){for(var n=this,t=0;t<n.banner_count;t++){var e=$("<li></li>");n.page_control.append(e),0===t&&e.addClass("active")}n.page_control.css({width:12*n.banner_count+16+16*(n.banner_count-1)})},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.banner_count+1?(n.banner_ul.css({left:-n.banner_width}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.animate=function(){var n=this;n.banner_ul.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.banner_count-1:t===n.banner_count+1?0:n.index-1,n.page_control.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.toggle_arrow=function(n){var t=this;n?(t.left_arrow.show(),t.right_arrow.show()):(t.left_arrow.hide(),t.right_arrow.hide())},Banner.prototype.listen_banner_hover=function(){var n=this;this.banner_group.hover(function(){clearInterval(n.timer),n.toggle_arrow(!0)},function(){n.loop(),n.toggle_arrow(!1)})},Banner.prototype.listen_arrow_click=function(){var n=this;n.left_arrow.click(function(){0===n.index?(n.banner_ul.css({left:-n.banner_count*n.banner_width}),n.index=n.banner_count-1):n.index--,n.animate()}),n.right_arrow.click(function(){n.index===n.banner_count+1?(n.banner_ul.css({left:-n.banner_width}),n.index=2):n.index++,n.animate()})},Banner.prototype.listen_page_control=function(){var e=this;e.page_control.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.init_page_control(),this.loop(),this.listen_banner_hover(),this.listen_arrow_click(),this.listen_page_control()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){var n=new Banner,t=new Index;n.run(),t.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lcl93aWR0aCIsImJhbm5lcl9ncm91cCIsIiQiLCJsZWZ0X2Fycm93IiwicmlnaHRfYXJyb3ciLCJiYW5uZXJfdWwiLCJsaV9saXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJfY291bnQiLCJsZW5ndGgiLCJwYWdlX2NvbnRyb2wiLCJJbmRleCIsInNlbGYiLCJwYWdlIiwiY2F0ZWdvcnlfaWQiLCJsb2FkQnRuIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsImZpcnN0X2Jhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0X2Jhbm5lciIsImFwcGVuZCIsInByZXBlbmQiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJpbml0X3BhZ2VfY29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwiYW5pbWF0ZSIsInN0b3AiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwidG9nZ2xlX2Fycm93IiwiaXNfc2hvdyIsInNob3ciLCJoaWRlIiwibGlzdGVuX2Jhbm5lcl9ob3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3Rlbl9hcnJvd19jbGljayIsImNsaWNrIiwibGlzdGVuX3BhZ2VfY29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsInRlbXBsYXRlIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSIsImJhbm5lciJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsU0FDTEMsS0FBS0MsTUFBUSxFQUNiRCxLQUFLRSxhQUFlLElBQ3BCRixLQUFLRyxhQUFlQyxFQUFFLGlCQUN0QkosS0FBS0ssV0FBYUQs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QUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU1DLFNBQVMsWUFBWSxDQUFDRixPQUFTQSxJQUNyQ00sRUFBZ0IvRCxFQUFFLHFCQUN0QitELEVBQWNDLFFBQ2RELEVBQWMzQyxPQUFPc0MsR0FDckJoRCxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWNBLEVBQ25CaUQsRUFBR2pDLFNBQVMsVUFBVU0sV0FBV0MsWUFBWSxVQUM3Q3pCLEVBQUtHLFFBQVF5QixjQU9qQzdCLE1BQU1LLFVBQVVrQyxJQUFNLFdBQ1BwRCxLQUNOcUQsc0JBRE1yRCxLQUVOZ0UsNkJBS1Q1RCxFQUFFLFdBQ0UsSUFBSWlFLEVBQVMsSUFBSXRFLE9BQ2JFLEVBQVEsSUFBSVksTUFDaEJ3RCxFQUFPakIsTUFDUG5ELEVBQU1tRCIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKXtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLmJhbm5lcl93aWR0aCA9IDc5ODtcbiAgICB0aGlzLmJhbm5lcl9ncm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xuICAgIHRoaXMubGVmdF9hcnJvdyA9ICQoJy5sZWZ0LWFycm93Jyk7XG4gICAgdGhpcy5yaWdodF9hcnJvdyA9ICQoJy5yaWdodC1hcnJvdycpO1xuICAgIHRoaXMuYmFubmVyX3VsID0gJCgnI2Jhbm5lci11bCcpO1xuICAgIHRoaXMubGlfbGlzdCA9IHRoaXMuYmFubmVyX3VsLmNoaWxkcmVuKFwibGlcIik7XG4gICAgdGhpcy5iYW5uZXJfY291bnQgPSB0aGlzLmxpX2xpc3QubGVuZ3RoO1xuICAgIHRoaXMucGFnZV9jb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XG59XG5cblxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBpbXBsZW1lbnQgb2YgYXV0byBsb29wIGJhbm5lciBzbGlkaW5nIHdpdGhvdXQgYW5pbWF0ZVxuICAgIC8vIHdoZW4gaW5kZXggPSB0aGUgbGFzdCBwaWMgb3IgdGhlIGZpcnN0IHBpY1xuICAgIC8vIGJlZm9yZTogMSAtPiAyIC0+IDNcbiAgICAvLyBub3c6IDMgLT4gMSAtPiAyIC0+IDMgLT4gMVxuICAgIHZhciBmaXJzdF9iYW5uZXIgPSBzZWxmLmxpX2xpc3QuZXEoMCkuY2xvbmUoKTtcbiAgICB2YXIgbGFzdF9iYW5uZXIgPSBzZWxmLmxpX2xpc3QuZXEoc2VsZi5iYW5uZXJfY291bnQgLSAxKS5jbG9uZSgpO1xuICAgIHNlbGYuYmFubmVyX3VsLmFwcGVuZChmaXJzdF9iYW5uZXIpO1xuICAgIHNlbGYuYmFubmVyX3VsLnByZXBlbmQobGFzdF9iYW5uZXIpO1xuICAgIHRoaXMuYmFubmVyX3VsLmNzcyh7XCJ3aWR0aFwiOiBzZWxmLmJhbm5lcl93aWR0aCAqIChzZWxmLmJhbm5lcl9jb3VudCArIDIpLFxuICAgICAgICAnbGVmdCc6IC1zZWxmLmJhbm5lcl93aWR0aH0pO1xufTtcblxuXG5CYW5uZXIucHJvdG90eXBlLmluaXRfcGFnZV9jb250cm9sID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmJhbm5lcl9jb3VudDsgaSsrKXtcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XG4gICAgICAgIHNlbGYucGFnZV9jb250cm9sLmFwcGVuZChjaXJjbGUpO1xuICAgICAgICBpZiAoaSA9PT0gMCl7XG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZi5wYWdlX2NvbnRyb2wuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyX2NvdW50ICogMTIgKyA4ICogMiArIDE2ICogKHNlbGYuYmFubmVyX2NvdW50IC0gMSl9KVxufTtcblxuXG5cbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIGJhbm5lcl91bC5jc3MoeydsZWZ0JzotNzk4fSk7XG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lcl9jb3VudCArIDEpe1xuICAgICAgICAgICAgc2VsZi5iYW5uZXJfdWwuY3NzKHsnbGVmdCc6LXNlbGYuYmFubmVyX3dpZHRofSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNle3NlbGYuaW5kZXgrKzt9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgIH0sIDIwMDApO1xuXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbigpe1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuYmFubmVyX3VsLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjogLTc5OCAqIHNlbGYuaW5kZXh9LCA1MDApO1xuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XG4gICAgaWYgKGluZGV4ID09PSAwKXtcbiAgICAgICAgaW5kZXggPSBzZWxmLmJhbm5lcl9jb3VudCAtIDE7XG4gICAgfVxuICAgIGVsc2UgaWYoaW5kZXggPT09IHNlbGYuYmFubmVyX2NvdW50ICsgMSl7XG4gICAgICAgIGluZGV4ID0gMDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcbiAgICB9XG4gICAgLy8gd2Ugc2V0IGFjdGl2ZSB0byB0aGUgY2hpbGRyZW4gdGhhdCBlcXVhbHMgdG8gdGhlIGdsb2JhbCBpbmRleFxuICAgIC8vIHJlbW92ZSB0aGUgd2hpdGUgYmFja2dyb3VuZCBvZiBvdGhlcnNcbiAgICBzZWxmLnBhZ2VfY29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVxKGluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xufTtcblxuQmFubmVyLnByb3RvdHlwZS50b2dnbGVfYXJyb3cgPSBmdW5jdGlvbihpc19zaG93KXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKGlzX3Nob3cpe1xuICAgICAgICBzZWxmLmxlZnRfYXJyb3cuc2hvdygpO1xuICAgICAgICBzZWxmLnJpZ2h0X2Fycm93LnNob3coKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgc2VsZi5sZWZ0X2Fycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5yaWdodF9hcnJvdy5oaWRlKCk7XG4gICAgfVxuXG5cbn07XG5cblxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5fYmFubmVyX2hvdmVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5iYW5uZXJfZ3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB3aGVuIG1vdXNlIGhvdmVyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7IC8vIHN0b3Agc2xpZGluZ1xuICAgICAgICBzZWxmLnRvZ2dsZV9hcnJvdyh0cnVlKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHdoZW4gbW91c2UgbGVhdmVcbiAgICAgICAgc2VsZi5sb29wKCk7XG4gICAgICAgIHNlbGYudG9nZ2xlX2Fycm93KGZhbHNlKVxuXG4gICAgfSlcblxufTtcblxuXG5CYW5uZXIucHJvdG90eXBlLmxpc3Rlbl9hcnJvd19jbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubGVmdF9hcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSAwKXtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyX3VsLmNzcyh7J2xlZnQnOiAtc2VsZi5iYW5uZXJfY291bnQgKiBzZWxmLmJhbm5lcl93aWR0aH0pO1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYuYmFubmVyX2NvdW50IC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG5cbiAgICBzZWxmLnJpZ2h0X2Fycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJfY291bnQgKyAxKXtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyX3VsLmNzcyh7J2xlZnQnOiAtc2VsZi5iYW5uZXJfd2lkdGh9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLmxpc3Rlbl9wYWdlX2NvbnRyb2wgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnBhZ2VfY29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBvYmope1xuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIGxlZnQgc2lkZSBzZWxmLmluZGV4IGlzIHRoZSBnbG9iYWwgYmFubmVyIGluZGV4XG4gICAgICAgICAgICAvLyByaWdodCBzaWRlIGluZGV4IGlzIHRoZSBpbmRleCBvZiBsaSB0YWdcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcblxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcbiAgICB0aGlzLmluaXRfcGFnZV9jb250cm9sKCk7XG4gICAgdGhpcy5sb29wKCk7XG4gICAgdGhpcy5saXN0ZW5fYmFubmVyX2hvdmVyKCk7XG4gICAgdGhpcy5saXN0ZW5fYXJyb3dfY2xpY2soKTtcbiAgICB0aGlzLmxpc3Rlbl9wYWdlX2NvbnRyb2woKTtcbn07XG5cblxuXG5mdW5jdGlvbiBJbmRleCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWdlID0gMjtcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XG5cbn1cblxuXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XG4gICAgbG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3c2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIse1wibmV3c2VzXCI6bmV3c2VzfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdGFiR3JvdXAgPSAkKFwiLmxpc3QtdGFiXCIpO1xuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgICAgICdwJzogcGFnZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld3Nlc1wiOm5ld3Nlc30pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnRuLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XG59O1xuXG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcbiAgICBiYW5uZXIucnVuKCk7XG4gICAgaW5kZXgucnVuKCk7XG59KTtcblxuIl19
