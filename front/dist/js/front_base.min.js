function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.handleNavStatus()},FrontBase.prototype.handleNavStatus=function(){var t=window.location.href,n=window.location.protocol+"//"+window.location.host,i=t.replace(n,"");$(".nav li").each(function(t,n){var e=$(n);if(e.children("a").attr("href")===i)return e.addClass("active"),!1})},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenSignupEvent(),t.listenImgCaptchaEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=$(".signin-btn"),n=$(".signup-btn"),e=$(".close-btn"),i=this;e.click(function(){i.hideEvent()}),t.click(function(){i.showEvent(),i.scrollWrapper.css({left:0})}),n.click(function(){i.showEvent(),i.scrollWrapper.css({left:-400})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var i=this,t=$(".signin-group"),o=t.find("input[name='telephone']"),a=t.find("input[name='password']"),r=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=o.val(),n=a.val(),e=r.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){i.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var l=$(".signup-group");l.find(".submit-btn").click(function(t){t.preventDefault();var n=l.find("input[name='telephone']"),e=l.find("input[name='username']"),i=l.find("input[name='img_captcha']"),o=l.find("input[name='password1']"),a=l.find("input[name='password2']"),r=n.val(),s=e.val(),u=i.val(),c=o.val(),p=a.val();xfzajax.post({url:"/account/register/",data:{telephone:r,username:s,img_captcha:u,password1:c,password2:p},success:function(t){window.location.reload()}})})},$(function(){var t=new Auth,n=new FrontBase;t.run(),n.run()}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),i=((new Date).getTime()-e)/1e3;if(i<60)return"Just now";if(60<=i&&i<3600)return minutes=parseInt(i/60),minutes+" minutes before";if(3600<=i&&i<86400)return hours=parseInt(i/60/60),hours+" hours before";if(86400<=i&&i<2592e3)return days=parseInt(i/60/60/24),days+" days before";var o=n.getFullYear(),a=n.getMonth();return n.getDay()+"/"+a+"/"+o+" "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiaGFuZGxlTmF2U3RhdHVzIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZG9tYWluIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aCIsInJlcGxhY2UiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwibGkiLCJjaGlsZHJlbiIsImF0dHIiLCJhZGRDbGFzcyIsImF1dGhCb3giLCJ1c2VyTW9yZUJveCIsImhvdmVyIiwic2hvdyIsImhpZGUiLCJzZWxmIiwibGlzdGVuU2hvd0hpZGVFdmVudCIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5TaWdudXBFdmVudCIsImxpc3RlbkltZ0NhcHRjaGFFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwiaW1nQ2FwdGNoYSIsIk1hdGgiLCJyYW5kb20iLCJjdXJfbGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsInNpZ25pbkdyb3VwIiwidGVsZXBob25lSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsInhmemFqYXgiLCJwb3N0IiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJyZWxvYWQiLCJzaWdudXBHcm91cCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZUlucHV0IiwiaW1nQ2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInVzZXJuYW1lIiwiaW1nX2NhcHRjaGEiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJhdXRoIiwiZnJvbnRCYXNlIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsYUEyQ1QsU0FBU0MsT0FDTUMsS0FDTkMsWUFBY0MsRUFBRSxpQkFEVkYsS0FFTkcsY0FBZ0JELEVBQUUsbUJBNUMzQkosVUFBVU0sVUFBVUMsSUFBTSxXQUNYTCxLQUNOTSxxQkFETU4sS0FFTk8sbUJBSVRULFVBQVVNLFVBQVVHLGdCQUFrQixXQUNsQyxJQUFJQyxFQUFNQyxPQUFPQyxTQUFTQyxLQUd0QkMsRUFGV0gsT0FBT0MsU0FBU0csU0FFUCxLQURiSixPQUFPQyxTQUFTSSxLQUV2QkMsRUFBT1AsRUFBSVEsUUFBUUosRUFBUSxJQUNqQlYsRUFBRSxXQUNSZSxLQUFLLFNBQVVDLEVBQU9DLEdBQzFCLElBQUlDLEVBQUtsQixFQUFFaUIsR0FHWCxHQUZXQyxFQUFHQyxTQUFTLEtBQ1BDLEtBQUssVUFDVFAsRUFFUixPQURBSyxFQUFHRyxTQUFTLFdBQ0wsS0FPbkJ6QixVQUFVTSxVQUFVRSxtQkFBcUIsV0FDckMsSUFBSWtCLEVBQVV0QixFQUFFLGFBQ1p1QixFQUFjdkIsRUFBRSxrQkFDcEJzQixFQUFRRSxNQUFNLFdBQ1ZELEVBQVlFLFFBQ2QsV0FDRUYsRUFBWUcsVUFlcEI3QixLQUFLSyxVQUFVQyxJQUFNLFdBQ2pCLElBQUl3QixFQUFPN0IsS0FDWDZCLEVBQUtDLHNCQUNMRCxFQUFLRSxvQkFDTEYsRUFBS0csb0JBQ0xILEVBQUtJLG9CQUNMSixFQUFLSyx5QkFJVG5DLEtBQUtLLFVBQVUrQixVQUFZLFdB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QUMsUUFBVXpDLFNBQVN3QyxFQUFZLElBQ3hCQyxRQUFRLGtCQUVkLEdBQWdCLE1BQWJELEdBQXNCQSxFQUFZLE1BRXRDLE9BREFFLE1BQVExQyxTQUFTd0MsRUFBWSxHQUFLLElBQzNCRSxNQUFNLGdCQUVaLEdBQWdCLE9BQWJGLEdBQXlCQSxFQUFZLE9BRXpDLE9BREFHLEtBQU8zQyxTQUFTd0MsRUFBWSxHQUFLLEdBQUssSUFDL0JHLEtBQU8sZUFFZCxJQUFJQyxFQUFPUixFQUFLUyxjQUNaQyxFQUFRVixFQUFLVyxXQUlqQixPQUhVWCxFQUFLWSxTQUdKLElBQUlGLEVBQU0sSUFBSUYsRUFBSyxJQUZuQlIsRUFBS2EsV0FFdUIsSUFEMUJiLEVBQUtjIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gRnJvbnRCYXNlKCl7fVxuXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcbiAgICBzZWxmLmhhbmRsZU5hdlN0YXR1cygpO1xufTtcblxuXG5Gcm9udEJhc2UucHJvdG90eXBlLmhhbmRsZU5hdlN0YXR1cyA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIHZhciBwcm90b2NvbCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICB2YXIgaG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgIHZhciBkb21haW4gPSBwcm90b2NvbCArIFwiLy9cIiArIGhvc3Q7XG4gICAgdmFyIHBhdGggPSB1cmwucmVwbGFjZShkb21haW4sICcnKVxuICAgIHZhciBuYXZMaXN0ID0gJChcIi5uYXYgbGlcIik7XG4gICAgbmF2TGlzdC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICB2YXIgbGkgPSAkKGVsZW1lbnQpO1xuICAgICAgICB2YXIgYVRhZyA9IGxpLmNoaWxkcmVuKCdhJyk7XG4gICAgICAgIHZhciBocmVmID0gYVRhZy5hdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgaWYoaHJlZiA9PT0gcGF0aCl7XG4gICAgICAgICAgICBsaS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59O1xuXG5cbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuQXV0aEJveEhvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhdXRoQm94ID0gJChcIi5hdXRoLWJveFwiKTtcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZXJNb3JlQm94LnNob3coKTtcbiAgICB9LGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xuICAgIH0pO1xufTtcblxuXG5cblxuXG5mdW5jdGlvbiBBdXRoKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xuICAgIHNlbGYuc2Nyb2xsV3JhcHBlciA9ICQoJy5zY3JvbGwtd3JhcHBlcicpO1xuXG59XG5cbkF1dGgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5Td2l0Y2hFdmVudCgpO1xuICAgIHNlbGYubGlzdGVuU2lnbmluRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblNpZ251cEV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKTtcblxufTtcblxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKTtcbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xuICB2YXIgc2lnbmluQnRuID0gJCgnLnNpZ25pbi1idG4nKTtcbiAgdmFyIHNpZ251cEJ0biA9ICQoJy5zaWdudXAtYnRuJyk7XG4gIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgc2VsZi5oaWRlRXZlbnQoKTtcbiAgfSk7XG4gIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNob3dFdmVudCgpO1xuICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOiAwfSk7XG4gIH0pO1xuXG4gIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNob3dFdmVudCgpO1xuICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOiAtNDAwfSk7XG4gIH0pO1xuXG59O1xuXG5cbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nLWNhcHRjaGEnKTtcbiAgICBpbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsIFwiL2FjY291bnQvaW1nX2NhcHRjaGEvXCIgKyBcIj9yYW5kb209XCIgKyBNYXRoLnJhbmRvbSgpKTtcbiAgICB9KTtcbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XG4gICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgIHZhciBjdXJfbGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xuICAgICAgIGN1cl9sZWZ0ID0gcGFyc2VJbnQoY3VyX2xlZnQpO1xuICAgICAgIGlmKGN1cl9sZWZ0IDwgMCl7XG4gICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIjBcIn0pO1xuICAgICAgIH1cbiAgICAgICBlbHNle1xuICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XCJsZWZ0XCI6IFwiLTQwMHB4XCJ9KTtcbiAgICAgICB9XG5cbiAgICB9KTtcblxufTtcblxuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xuXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzogcmVtZW1iZXI/MTowXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzaWdudXBHcm91cCA9ICQoXCIuc2lnbnVwLWdyb3VwXCIpO1xuICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBub3QgaGF2ZSB0b1xuICAgICAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XG4gICAgICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKVxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKVxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKClcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpXG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcbiAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XG4gICBhdXRoLnJ1bigpO1xuICAgZnJvbnRCYXNlLnJ1bigpO1xufSk7XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgaWYodGVtcGxhdGUpe1xuICAgICAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcbiAgICAgICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKS8xMDAwO1xuICAgICAgICAgICAgaWYodGltZXN0YW1wIDwgNjApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0p1c3Qgbm93JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKSB7XG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWludXRlcysnIG1pbnV0ZXMgYmVmb3JlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KSB7XG4gICAgICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMrJyBob3VycyBiZWZvcmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAqNjAqMjQgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQqMzApIHtcbiAgICAgICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF5cyArICcgZGF5cyBiZWZvcmUnO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xuICAgICAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF5KycvJyttb250aCsnLycreWVhcitcIiBcIitob3VyK1wiOlwiK21pbnV0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pOyJdfQ==
